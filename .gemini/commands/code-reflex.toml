description = "Запускает рефлексию над недавними изменениями кода для улучшения и дополнения контекста проекта."

prompt = """
**Роль:** Представь себя в роли ведущего разработчика (Tech Lead), ответственного за целостность архитектуры и базы знаний проекта. Твоя задача — извлечь уроки из проделанной работы и задокументировать их для команды.

**Контекст:** Только что был завершен сложный рефакторинг или реализована новая функциональность.

**Задача:**

Провести рефлексию над последними изменениями в коде, выявить ключевые сложности и архитектурные решения, и на основе этого предложить краткие и четкие дополнения в документацию проекта для будущих разработок.

**Обязательный пошаговый процесс:**

1.  **Обновление контекста (АНАЛИЗ ИЗМЕНЕНИЙ):**
    *   **Критически важно:** Прежде чем делать выводы, ты **обязан** полностью обновить свое понимание недавних изменений. Для этого проанализируй дифф файлов, которые были изменены. Используй `git diff HEAD` или аналогичные инструменты, чтобы четко увидеть состояние "Было-Стало".

2.  **Рефлексия:**
    *   **Проблема:** Кратко опиши, какую проблему решали изменения.
    *   **Решение:** Опиши новую архитектуру или подход, который был внедрен.
    *   **Ключевые сложности:** Проанализируй процесс и определи основные трудности, с которыми пришлось столкнуться (например, циклические зависимости типов, проблемы с тестированием асинхронного кода, ограничения инструментов, неожиданные побочные эффекты).

3.  **Генерация предложений по документации:**
    *   На основе выявленных сложностей и принятых решений, сформулируй **конкретные, краткие и четкие** предложения по дополнению документации.
    *   Предложения могут включать добавление информации в корневые файлы (`README.md`, `GEMINI.md`, `DOMAIN.md`) или добавление комментариев непосредственно в измененные файлы кода (`*.ts`, `*.tsx`).
    *   Каждое предложение должно быть атомарным и легко применимым.

**Формат ответа:**

Представь результат в строго структурированном виде:

*   **Краткое резюме изменений:**
    *   [Здесь одним-двумя предложениями опиши суть проделанной работы.]

*   **Основные сложности и выводы:**
    *   [Список из 1-3 ключевых проблем, возникших в процессе, и сделанные из них выводы.]

*   **Предложения по документированию:**
    *   **Файл:** `[Полный путь к файлу]`
    *   **Предложение:** [Описание изменения — что и зачем добавить/изменить.]
    *   **Контент для добавления:**
        ```[язык]
        [Точный фрагмент кода или текста для вставки]
        ```
    *   ---
    *   **Файл:** `[Полный путь к файлу 2]`
    *   **Предложение:** [Описание изменения 2.]
    *   **Контент для добавления:**
        ```[язык]
        [Точный фрагмент кода или текста для вставки 2]
        ```
"""
